language: python
python: '2.6'
env:
  global:
  - secure: Ni1opL+3wD8A2qBcFUZ9oY8zeblloyPy/LFb981qFQsGAXWwDnaa7i/2yxQXFXP2ahTUojflp7icDvBwWpV8Tc48JMJDOQLvxSaijiSpYdzx4m1FLXufv7kdgeuvYsLcBk4+vhqPTZaX4JADubj0V+/AJThupYG9XF5r3LfU2DjgRwxpRQthShgb81cKTMVYqdhq4/A533SFLuYVou/PlkywYNcwp9QHVI8bzw8XlRPkzJoPcH2871yfOofQgQp7l96cFbEXhU027y3sBDKzz/Rm/pEysw71EyPqlJiZxn5rHwhXcv0eZ8KcwxZ5c6bPh1rDYYj5CxRqzXXuHRL60Hvwfd6FiWAb4tZo3NNDYamc1yDq4pLdkKHGqmhf44cNBcCegs4Myn2WKUt/dSWegoHvBlZNxNWcirBLxOQbfvTyEqJ60Hh5FBWtG0hCNMio4bUmWm47w6SzucCpzIe4gENqQ9d++ObskpQ9fFrJsW1qPcHDOZzpg/0aHhd4QN61a0ycQMd2g6USlzmjjZSFVXmbu11kWKbADP/QhSmpiKoXiFY1sYvo3IGKYZaj9PxiucGtpGynplFgE006ymf2v70evjrY+FmUdFX353w0wefOFCmx3Ukx9T16YwNn8CuZDIW3Jdx5zhzl8lomF7FuLH7SUTK2xoQiHkQBnaM3B/I=
  - secure: YD8QucufBppGWj9yKYvdDGKD5fFOE6H7xHYfSCpRbSdvMlOu5WAuuoCr+ie6GonZse+fqRidWdOOTxgtjqSAxR76wal2DaCPXwW+XHCjDOylYtmDpI33bwibXvc9hB83w/2CNuzrNeeTTqKjh6QzAlgJ5e9sHVSG04u4uF4qIxVAxkygHmetrPofSsUMJXkJ6Vdz4MYcIccw+pT7DiSGgNGnv/KPES1bSGCjS2Tj8jRYt7583WkL41BX7Atmnzk7/sM9B/hIv+m1xyLShao8UaPdbTVJl5LMKI20NXZXkUWwWvYrzMZ6Xi2O83lce8YnLYBk37n7A/YXux9vT818TYUcXrpab0qhBal67+L1c4m/2iDRYq5L+pPkjw9ftslN5zR8gqBN6c/ZTf0QSrNmtUjr8dyFKgVjFAMYb4Rth0yJReU6O/xFyyj4rFOUTjESYviCN9Dxj5Spznx2S4ayuIIXBAhDKYTDG0vQOQbdBeOiuwkqh/y63/XPihPxwuXPO1QpzrJGFiEgtmv21mHOr2pX2t9IlKJcDbRLHUAjzptbjDej+gdO7s1xe1+8kwRgiU+LuxzzviNSY9rmQTfIlJRRUvElkPyxCGmSE6DMVMpNrxQiHLJ5SoBeEP6RE00Wlk2qk9TOLIoNPowGa3sxEOYOsGDlmaIxurduat9rsAY=
  - secure: PGNIERjppCndBf6J2+XRGRSDKGkhNW38DEq10R1X/IM4PXEC7B0XQNkXIlu2OQPiRjM7CHcD41dpfz6V2DGdn2cym8aH93hJx2aL75XRnPAB5kyLqOUQekUZDjgXPenoafIK7YiOkoKbf+aprjwNFjztVmLBHTBn4nFxCyTdzHMvkfGlgatDjb38SIjlUMOWQL1qG1hM/QlG2iHtWGROqfMcADIWL7EV8yqDmDGr/sirnjHgmymfXhWuKLeTl319EKwI6knHDli1qM47NOP8adwGjjBrwTidmGu8FF3hSVT2YXwVTI7Kmf4jTfAkdKXj26V6y0402bMUS+ZSGM8cgBdBxpFDRCrSlLxcYOgh2q3rV4fPU43PC83397M1rTFGGl9BeiKRaHpwlH/YlGN3auwih6De0/A1Ud87K8uhdy0j20SN2fTTFAXFY2imQRatmQS1+GLzGhY/q4vvPTr+bkFKN80KtW8hQtq74bOoyi9vkJ1g7feIeOv+TDSBDkcLcDG+xkfsmdvMjyEqMJhzoPYBJM83PLqVVl5HU2X0a1ppYzjCIURPs1seqfWzCq2rDZCFXIlDvXoYO0j95dk89ApiAolEppcUzOI6BztC+4NL+aeWYye1qLfBcbTT9SeIr7RpcNlQE31Zs528YsGJTACz1OyRO9DMxh7488hwZmQ=
  - secure: egmt12s0mSl59pNoQE5J5/rz4FSkKtd18Rai6lK+B6DC9x9Q2/JOAY2Huyoa8vuT8FX4hJDpeoIhztf0BqfQ4YXbv6/C2dbSLctsWDoFThxLuqRDoEclEDhHs03V4Mnmn8KAZmieEsonC59Oj41Lr833wnJFQ3AzieqBp4Pv+qisb5EMXleWTDrbiGIfvpJM+ElZubUPsKc4cFvbvfgiKUiYI0BeZ1FOdAEzzGIHIClLAHdZ9F96li7Aw1zvZG47mA3geQQSYLJCCiwzhsB8ugPnyVb5qC5oKjLWf1wT9vtv5Sd3zRu5Z0YjIzYzAoJ+57mO4TnCGftok0W+k+CzWsM8Vu6p/bH9WB/iSnmZE114UB76F6H6I+shOadcJ/6bIBxgK0xHqhYUW2XgjGc2l3DbqTE/T9wwY4X5m791dxRWQB9gnhJa0DIA7prej2J2iOF03s2oA5E7Sr6nckq2lLaYkfnaycv2y1RHFEUs3oeh/4LBzLfR1W4UJBT9w3JeQ3uJla9cfSEwzaPzkZ++wFbp4/EMfJBRUowBz2ZXD4bDw5eF8L8lOwOvQUOz5i00NZ5J3djbhlr1fSOwd8UUQFAHueDRlnYVdzhVVwIP6ZvkiLcwtz3V6sAZkxhCycaRHoD/d1lY0I/qmRwDxMPOVk81V0EpPQ1Yaa+ksJhOZPA=
install:
- pip install MySQL-python
script:
- cp server/config_example.py server/config.py
- python server/next.cgi
- chmod +x staging.sh
- "./staging.sh  $STAGING_FTP_USER  $STAGING_FTP_PASSWORD"
before_deploy:
- rm server/config.py
- npm install gulp
- npm install gulp -g
- npm install vinyl-ftp gulp-util minimist --save-dev
- chmod +x deploy.sh
deploy:
  skip_cleanup: true
  provider: script
  script: "./deploy.sh  $FTP_USER  $FTP_PASSWORD  $TRAVIS_TAG"
  on:
    tags: true
